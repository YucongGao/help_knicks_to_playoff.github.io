<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Project Report</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Go Go Knicks!</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="final_report.html">Report</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Regression
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="test_here.html">Regression for playoff</a>
    </li>
    <li>
      <a href="second_regression.html">Regression for win or lose</a>
    </li>
    <li>
      <a href="second_regression.html">Regression for score</a>
    </li>
  </ul>
</li>
<li>
  <a href="proposal.html">About</a>
</li>
<li>
  <a href="https://github.com/YucongGao/help_knicks_to_playoff.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="mailto:&lt;pl2811@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Project Report</h1>

</div>


<div id="motivationpictures-links-and-words-refinement" class="section level1">
<h1>Motivation(Pictures, links and words refinement)</h1>
<p>As NBA fans, we are witnessing probably the greatest revolution ever on the court, which is called “Small ball era”. Teams tend to use small and faster players instead of traditional giants to accelerate moving speed and improve shooting efficiency.</p>
<p>Last year, our favorite team Knicks returned to playoff season after eight years, which brought great joy to the fans. In order to make this performance long-lasting, we feel obligated to research the key variables that contribute to the winning so that help Knicks maintain existing strengths and make up for the disadvantages. The most obvious feature of the “small ball era” is the lifting of speed and the rise of 3 point shot attempt. In this way, we focus on offensive playtype and three-point related variables along with other factors to conduct our analysis.</p>
</div>
<div id="questions" class="section level1">
<h1>Questions</h1>
<p>To ensure themselves into the playoff game, Knicks need to win enough games to become top eight in east conference. So at the very beginning, we are interested in exploring the distribution of the number of games won by NBA playoff teams to find the threshold number of wins to enter into the playoff. Then We want to figure out the contributors to total wins of a season and single win of a game. With the assumption that total wins are independent between each team and each year, and the result of a single game is independent of another, we used linear regression model to fit total wins with average performance predictors in both offensive and defensive parts. In addition, we would use our model to predict Knicks’ performance in the new season of 2021-22 to see whether it can get into play-off season. Then according to the models we build, we analyzed the performance of Knicks on key predictors to see the gap between knicks and super teams. What’s more, we deep dived these gaps from team level into player level and found how leading players should improve to get more wins. Finally, a detailed game and training strategy is proposed.</p>
<ol style="list-style-type: decimal">
<li><p>What is the threshold number of wins to enter playoff?</p></li>
<li><p>What variables contribute to the total wins of a season, how they impact a single game result? <br></p></li>
<li><p>If using the model we built to predict the ranking of Knicks with data in this new season, will it get into play-off?</p></li>
<li><p>What is the difference in performance between Knicks and league average?</p></li>
</ol>
<p>1).How is the Knicks’ three shooting performance different from the league average? 2).Are there any obvious weakness in three point shooting?</p>
<ol start="5" style="list-style-type: decimal">
<li>What Knicks can do to improve its performance in other areas such as assistance, rebound, etc. to secure a place in play-off season?</li>
</ol>
</div>
<div id="data" class="section level1">
<h1>Data</h1>
<div id="data-source" class="section level2">
<h2>Data Source</h2>
<p>As our project needs detailed stats about NBA teams and players from last 10 seasons NBA regular season, we used scrapping to get official advanced data from <a href="https://www.nba.com/stats/">NBA Stats</a>. There are four datasets we mainly used:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://www.nba.com/stats/teams/boxscores-advanced/">Advanced Box Score</a>: In this data set, each observation represent a game and the specific data in this game, which contains the score, total field goal attempt, three point made and so on.</p></li>
<li><p><a href="https://www.nba.com/stats/teams/transition/">Playtype by Team</a>: this data set contains average data for each team of a season in the aspect of offensive play type, such as isolation, pick and roll, ect. Each observation represent the team average data in a regular season with respect to a specific play type.</p></li>
<li><p><a href="https://www.nba.com/stats/teams/drives/">Tracking</a>: this data set contains detailed information about NBA teams’ average movement data in a regular season, for example, passing, touches.</p></li>
<li><p><a href="https://www.nba.com/stats/events/?flag=3&amp;CFID=155&amp;CFPARAMS=2021-22&amp;TeamID=1610612752&amp;ContextMeasure=FGA&amp;Season=2021-22&amp;section=team&amp;sct=hex">Knicks Shooting Log</a>: in this data set, each observation represent a field goal that player in Knicks made, including the player who made the shot, the location they shot, the time remaining when the shot was made.</p></li>
</ol>
<p>As I mentioned above, these data sets were scrapped from NBA website, the code to scrap data can be found at <a href="scrapping_data.Rmd">scrapping data</a></p>
</div>
<div id="data-wranglingref-for-scrapping" class="section level2">
<h2>Data Wrangling(ref for scrapping)</h2>
<p>First, the datasets in <a href="https://www.nba.com/stats/">NBA Stats</a> don’t have API, so we write a function to extract them using devtools.</p>
<pre class="r"><code>scrapping_data = function(url) {
  headers = headers = c(
  `Connection` = &#39;keep-alive&#39;,
  `Accept` = &#39;application/json, text/plain, */*&#39;,
  `x-nba-stats-token` = &#39;true&#39;,
  `X-NewRelic-ID` = &#39;VQECWF5UChAHUlNTBwgBVw==&#39;,
  `User-Agent` = &#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36&#39;, 
  `x-nba-stats-origin` = &#39;stats&#39;,
  `Sec-Fetch-Site` = &#39;same-origin&#39;,
  `Sec-Fetch-Mode` = &#39;cors&#39;,
  `Referer` = &#39;https://stats.nba.com/players/leaguedashplayerbiostats/&#39;,
  `Accept-Encoding` = &#39;gzip, deflate, br&#39;,
  `Accept-Language` = &#39;en-US,en;q=0.9&#39;)
  response = GET(url, add_headers(headers))
  data = fromJSON(content(response, as = &quot;text&quot;))
  df = data.frame(data$resultSets$rowSet[[1]], stringAsFactors = FALSE)
  names(df) = tolower(data$resultSets$headers[[1]])
  return(df)
}

drop_last_column = function(df) {
  df = df %&gt;% select(-names(df)[[length(names(df))]])
  return(df)}</code></pre>
<p>Then, apply the function to each dataset we want, select the variables we want and save all of them to local. Here is one example, box_score_all.</p>
<pre class="r"><code>season_years = c(&quot;2020-21&quot;, &quot;2019-20&quot;, 
           &quot;2018-19&quot;, &quot;2017-18&quot;, 
           &quot;2016-17&quot;, &quot;2015-16&quot;, 
           &quot;2014-15&quot;, &quot;2013-14&quot;, 
           &quot;2012-13&quot;, &quot;2011-12&quot;, 
           &quot;2010-11&quot;, &quot;2009-10&quot;, 
           &quot;2008-09&quot;, &quot;2007-08&quot;, 
           &quot;2006-07&quot;, &quot;2005-06&quot;, 
           &quot;2004-05&quot;, &quot;2003-04&quot;, 
           &quot;2002-03&quot;, &quot;2001-02&quot;)

box_score_all = tibble(
  season_year = season_years,
  url = str_c(&quot;https://stats.nba.com/stats/teamgamelogs?DateFrom=&amp;DateTo=&amp;GameSegment=&amp;LastNGames=0&amp;LeagueID=00&amp;Location=&amp;MeasureType=Base&amp;Month=0&amp;OpponentTeamID=0&amp;Outcome=&amp;PORound=0&amp;PaceAdjust=N&amp;PerMode=Totals&amp;Period=0&amp;PlusMinus=N&amp;Rank=N&amp;Season=&quot;, season_year, &quot;&amp;SeasonSegment=&amp;SeasonType=Regular+Season&amp;ShotClockRange=&amp;VsConference=&amp;VsDivision=&quot;),
  box_score = map(url, scrapping_data)) %&gt;% 
  mutate(box_score = map(box_score, drop_last_column)) %&gt;% # last column of each box score is NA
  select(-season_year, -url) %&gt;% 
  unnest(cols = box_score)

write_csv(box_score_all, &quot;./data2/box_score_all.csv&quot;)</code></pre>
<p>All the raw datasets are as following:</p>
<ul>
<li>box_score_all: contains statistics in individual games. Totally 47830 observations in the last 20 years, Variables include win or lose, rebound, assist, three point shooting attempt and so on.</li>
<li>passing_df: average of passes each game.</li>
<li>defensive_impact_df: contain average defensive variables each game by team and season.</li>
<li>isolation_df: average isolation times each game by team and season.</li>
<li>transition_df: average transition times each game by team and season.</li>
<li>pick_roll_baller_df: average pick and roll for ball handler by team and season.</li>
<li>pick_roll_roller_df: average pick and roll for roll man by team and season.</li>
</ul>
<p>After download these half raw dataset, we need to prepare four dataframe for exploring data analysis, fit regression model.</p>
<p>1.avg_df As data in box_score_all is documented per game, we need to summarise it into total and average stats. Detailed wrangling process:</p>
<p>1).select the variables we are interested from box_score_all.</p>
<p>2).define four new variables. * <code>win</code>: 1 means winning and 0 means lost. * <code>game_num</code>: constant 1 used to sum the number of games. * <code>fg3a_p</code>: the percentage of 3 point field goal attempt. * <code>conference</code>: west or east</p>
<p>3).exploratory data analysis. * calculate total number of wins, total number of games, total number of field goal attempt, total number of field goal made, total number of 3 points field goal attempt and total number of 3 points field goal made by team and season. * calculate average number of points, average number of assists and average number of turnovers by team and season. * revised the number of wins in strike season and COVID-19 season. * locate key variables at the first. * arrange all data by season year and number of wins.</p>
</div>
<div id="data-description" class="section level2">
<h2>Data Description</h2>
</div>
</div>
<div id="exploratory-analysis" class="section level1">
<h1>Exploratory Analysis</h1>
<p>In this part, we explore that on which variables, there would be difference between teams that get into play-off season and teams that not. In this way, we can get some insight on choosing potential parameters for model building. Specifically, we identify the trend in three point attempt by time in the past 10 seasons</p>
</div>
<div id="regression-related" class="section level1">
<h1>Regression Related</h1>
</div>
<div id="shiny-app" class="section level1">
<h1>Shiny App</h1>
</div>
<div id="conclusion-and-discussion" class="section level1">
<h1>Conclusion and Discussion</h1>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
